<div class="dashboard-wrapper">
    <!-- Responsive Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top" style="background: linear-gradient(135deg, #0A0E27, #1A1F4D); border-bottom: 2px solid rgba(0,240,255,0.3);">
        <div class="container-fluid px-3 px-md-4">
            <a class="navbar-brand fw-bold d-flex align-items-center" [routerLink]="['/dashboard']">
                <img src="/assets/logo/logo.png" alt="EagleInvest" class="me-2" style="width: 30px; height: 30px; object-fit: contain;" />
                <span style="background: linear-gradient(135deg, #00F0FF, #4D7CFF); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 1.3rem;">EagleInvest</span>
            </a>

            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" style="color: #00F0FF;">
        <i class="bi bi-list" style="font-size: 1.5rem; color: #00F0FF;"></i>
      </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <li class="nav-item">
                        <a class="nav-link px-3 py-2 rounded" [routerLink]="['/dashboard']" routerLinkActive="active" style="color: #CDD2E5; transition: all 0.3s;">
                            <i class="bi bi-speedometer2 me-2"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3 py-2 rounded" [routerLink]="['/market']" routerLinkActive="active" style="color: #CDD2E5; transition: all 0.3s;">
                            <i class="bi bi-graph-up me-2"></i>Mercado
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3 py-2 rounded" [routerLink]="['/withdrawals']" routerLinkActive="active" style="color: #CDD2E5; transition: all 0.3s;">
                            <i class="bi bi-cash-coin me-2"></i>Retiros
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3 py-2 rounded" [routerLink]="['/transactions']" routerLinkActive="active" style="color: #CDD2E5; transition: all 0.3s;">
                            <i class="bi bi-list-check me-2"></i>Transacciones
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link px-3 py-2 rounded" [routerLink]="['/profile']" routerLinkActive="active" style="color: #CDD2E5; transition: all 0.3s;">
                            <i class="bi bi-person me-2"></i>Perfil
                        </a>
                    </li>
                    <li class="nav-item ms-lg-3 mt-3 mt-lg-0">
                        <button class="btn btn-sm w-100" (click)="logout()" style="background: linear-gradient(135deg, #00F0FF, #4D7CFF); color: #0A0E27; font-weight: 600; border: none; padding: 8px 20px; border-radius: 8px;">
              <i class="bi bi-box-arrow-right me-2"></i>Salir
            </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content" style="background: linear-gradient(135deg, #0A0E27 0%, #13172E 100%); min-height: calc(100vh - 70px); padding: 20px 0;">
        <div class="container-fluid px-3 px-md-4 px-lg-5">
            <!-- Header Section -->
            <div class="row mb-3 mb-md-4">
                <div class="col-12">
                    <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3">
                        <div style="flex: 1;">
                            <h1 class="mb-2" style="color: white; font-weight: 800; font-size: clamp(1.3rem, 4vw, 2.2rem); line-height: 1.2;">
                                Bienvenido, <span style="background: linear-gradient(135deg, #00F0FF, #4D7CFF); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">{{dashboardData()?.user?.name || 'Usuario'}}</span>
                            </h1>
                            <p style="color: #A1A9C9; font-size: clamp(0.85rem, 1.8vw, 0.95rem); margin: 0;">
                                <i class="bi bi-calendar-check me-2"></i>Panel actualizado en tiempo real
                            </p>
                        </div>
                        <button class="btn btn-bot-control" (click)="refreshData()" style="background: rgba(0,240,255,0.1); border: 1px solid rgba(0,240,255,0.3); color: #00F0FF; padding: 10px 20px; border-radius: 8px; white-space: nowrap; font-weight: 600;">
              <i class="bi bi-arrow-clockwise me-2"></i>Actualizar
            </button>
                    </div>
                </div>
            </div>

            <!-- Stats Cards - Diseño Mejorado y Moderno -->
            <div class="row g-3 g-md-4 mb-4 mb-md-5 stagger-children">
                <!-- Total Invertido -->
                <div class="col-6 col-lg-3">
                    <div class="stat-card gpu-accelerated" style="background: linear-gradient(145deg, rgba(9,15,45,0.95), rgba(6,10,28,0.92)); border: 1px solid rgba(0,240,255,0.3); border-radius: 16px; padding: 22px; backdrop-filter: blur(15px); height: 100%; position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0,240,255,0.1);">
                        <div style="position: absolute; top: -20px; right: -20px; width: 100px; height: 100px; background: radial-gradient(circle, rgba(0,240,255,0.1), transparent); border-radius: 50%;"></div>
                        <div class="d-flex align-items-start justify-content-between mb-3">
                            <div class="icon-wrapper" style="background: linear-gradient(135deg, rgba(0,240,255,0.2), rgba(12,235,221,0.15)); border-radius: 14px; padding: 12px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(0,240,255,0.3);">
                                <i class="bi bi-graph-up" style="color: #00F0FF; font-size: 1.6rem;"></i>
                            </div>
                            <span style="background: rgba(0,240,255,0.15); color: #00F0FF; padding: 5px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700;">TOTAL</span>
                        </div>
                        <h6 style="color: #7581A8; font-size: 0.75rem; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px;">Invertido</h6>
                        <h3 class="counter-number" style="color: white; font-weight: 800; font-size: clamp(1.4rem, 3.5vw, 1.8rem); margin: 0; line-height: 1; text-shadow: 0 2px 8px rgba(0,240,255,0.3);">${{ (dashboardData()?.stats?.total_invested || 0) | number:'1.2-2' }}</h3>
                    </div>
                </div>

                <!-- Ganancias Totales -->
                <div class="col-6 col-lg-3">
                    <div class="stat-card gpu-accelerated" style="background: linear-gradient(145deg, rgba(9,15,45,0.95), rgba(6,10,28,0.92)); border: 1px solid rgba(12,235,221,0.3); border-radius: 16px; padding: 22px; backdrop-filter: blur(15px); height: 100%; position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(12,235,221,0.1);">
                        <div style="position: absolute; top: -20px; right: -20px; width: 100px; height: 100px; background: radial-gradient(circle, rgba(12,235,221,0.1), transparent); border-radius: 50%;"></div>
                        <div class="d-flex align-items-start justify-content-between mb-3">
                            <div class="icon-wrapper" style="background: linear-gradient(135deg, rgba(12,235,221,0.2), rgba(0,240,255,0.15)); border-radius: 14px; padding: 12px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(12,235,221,0.3);">
                                <i class="bi bi-arrow-up-circle-fill" style="color: #0CEBDD; font-size: 1.6rem;"></i>
                            </div>
                            <span style="background: rgba(12,235,221,0.15); color: #0CEBDD; padding: 5px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700;">+{{ ((dashboardData()?.stats?.total_earnings || 0) / (dashboardData()?.stats?.total_invested || 1) * 100) | number:'1.1-1' }}%</span>
                        </div>
                        <h6 style="color: #7581A8; font-size: 0.75rem; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px;">Ganancias</h6>
                        <h3 class="counter-number" style="color: #0CEBDD; font-weight: 800; font-size: clamp(1.4rem, 3.5vw, 1.8rem); margin: 0; line-height: 1; text-shadow: 0 2px 8px rgba(12,235,221,0.3);">${{ (dashboardData()?.stats?.total_earnings || 0) | number:'1.2-2' }}</h3>
                    </div>
                </div>

                <!-- Balance Disponible -->
                <div class="col-6 col-lg-3">
                    <div class="stat-card gpu-accelerated" style="background: linear-gradient(145deg, rgba(9,15,45,0.95), rgba(6,10,28,0.92)); border: 1px solid rgba(77,124,255,0.35); border-radius: 16px; padding: 22px; backdrop-filter: blur(15px); height: 100%; position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(77,124,255,0.12);">
                        <div style="position: absolute; top: -20px; right: -20px; width: 100px; height: 100px; background: radial-gradient(circle, rgba(77,124,255,0.12), transparent); border-radius: 50%;"></div>
                        <div class="d-flex align-items-start justify-content-between mb-3">
                            <div class="icon-wrapper" style="background: linear-gradient(135deg, rgba(77,124,255,0.2), rgba(0,240,255,0.12)); border-radius: 14px; padding: 12px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(77,124,255,0.28);">
                                <i class="bi bi-wallet2" style="color: #4D7CFF; font-size: 1.6rem;"></i>
                            </div>
                            <span style="background: rgba(77,124,255,0.15); color: #4D7CFF; padding: 5px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700;">RETIRABLE</span>
                        </div>
                        <h6 style="color: #7581A8; font-size: 0.75rem; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px;">Disponible</h6>
                        <h3 class="counter-number" style="color: #4D7CFF; font-weight: 800; font-size: clamp(1.4rem, 3.5vw, 1.8rem); margin: 0; line-height: 1; text-shadow: 0 2px 8px rgba(77,124,255,0.28);">${{ (dashboardData()?.stats?.earnings_balance || 0) | number:'1.2-2' }}</h3>
                    </div>
                </div>

                <!-- Referidos -->
                <div class="col-6 col-lg-3">
                    <div class="stat-card gpu-accelerated" style="background: linear-gradient(145deg, rgba(9,15,45,0.95), rgba(6,10,28,0.92)); border: 1px solid rgba(77,124,255,0.3); border-radius: 16px; padding: 22px; backdrop-filter: blur(15px); height: 100%; position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(77,124,255,0.12);">
                        <div style="position: absolute; top: -20px; right: -20px; width: 100px; height: 100px; background: radial-gradient(circle, rgba(77,124,255,0.12), transparent); border-radius: 50%;"></div>
                        <div class="d-flex align-items-start justify-content-between mb-3">
                            <div class="icon-wrapper" style="background: linear-gradient(135deg, rgba(77,124,255,0.2), rgba(0,240,255,0.12)); border-radius: 14px; padding: 12px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(77,124,255,0.28);">
                                <i class="bi bi-people-fill" style="color: #4D7CFF; font-size: 1.6rem;"></i>
                            </div>
                            <span style="background: rgba(77,124,255,0.15); color: #4D7CFF; padding: 5px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700;">{{(dashboardData()?.stats?.total_referrals || 0)}}</span>
                        </div>
                        <h6 style="color: #7581A8; font-size: 0.75rem; margin-bottom: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px;">Comisiones</h6>
                        <h3 class="counter-number" style="color: #4D7CFF; font-weight: 800; font-size: clamp(1.4rem, 3.5vw, 1.8rem); margin: 0; line-height: 1; text-shadow: 0 2px 8px rgba(77,124,255,0.28);">${{ (dashboardData()?.stats?.referral_balance || 0) | number:'1.2-2' }}</h3>
                        <p style="color: #A1A9C9; font-size: 0.75rem; margin: 8px 0 0 0; font-weight: 500;">
                            <i class="bi bi-person-check me-1" style="color: #4D7CFF;"></i>{{(dashboardData()?.stats?.total_referrals || 0)}} referidos
                        </p>
                    </div>
                </div>
            </div>

            <!-- Paquetes de Inversión (mismo estilo que Home) -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="gpu-accelerated" style="background: linear-gradient(135deg, rgba(0,240,255,0.08), rgba(77,124,255,0.06)); border: 1px solid rgba(0,240,255,0.2); border-radius: 16px; padding: 20px; backdrop-filter: blur(10px);">
                        <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center gap-3">
                            <div>
                                <h4 style="color: white; font-weight: 800; font-size: clamp(1.2rem, 3.5vw, 1.6rem); margin: 0 0 8px 0; display: flex; align-items: center; gap: 12px;">
                                    <span style="width: 48px; height: 48px; background: linear-gradient(135deg, rgba(0,240,255,0.25), rgba(77,124,255,0.15)); border-radius: 12px; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(0,240,255,0.3);">
                                        <i class="bi bi-boxes" style="color: #00F0FF; font-size: 1.35rem;"></i>
                                    </span> Paquetes de Inversión
                                </h4>
                                <p style="color: #7581A8; margin: 0; font-size: 0.9rem;">
                                    Elige un plan y comienza a invertir
                                </p>
                            </div>
                            <button [routerLink]="['/payment']" style="background: linear-gradient(135deg, #00F0FF, #4D7CFF); color: white; padding: 12px 20px; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 0.9rem; box-shadow: 0 4px 15px rgba(0,240,255,0.3); transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,240,255,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,240,255,0.3)'">
                                <i class="bi bi-arrow-right-circle"></i>
                                <span class="d-none d-sm-inline">Ver e invertir</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-4 mb-5">
                <div class="col-12 col-md-6 col-xl-4" *ngFor="let plan of plans(); let idx = index">
                    <div class="plan-card h-100" [class.plan-recommended]="plan.recommended" [style.--plan-color]="plan.accent" [style.--plan-gradient]="'linear-gradient(135deg, ' + plan.accent + ', ' + plan.accent + 'dd)'">

                        <div *ngIf="plan.recommended" class="badge position-absolute top-0 start-50 translate-middle-x" style="margin-top: -8px; background: linear-gradient(135deg, #00F0FF, #4D7CFF); color: #0A0E27; font-weight: 800; letter-spacing: 0.6px; padding: 6px 16px; box-shadow: 0 4px 18px rgba(0,240,255,0.25);">
                            MÁS POPULAR
                        </div>

                        <div class="p-4" style="position: relative;">
                            <div class="text-center mb-4">
                                <div class="plan-icon-wrapper mb-3" [style.background]="'linear-gradient(135deg, ' + plan.accent + ', ' + plan.accent + 'dd)'">
                                    <i class="bi bi-graph-up-arrow" style="font-size: 2.2rem; color: white;"></i>
                                </div>
                                <h4 class="fw-bold mb-2" [style.color]="plan.accent">{{ plan.name }}</h4>
                                <span class="badge px-3 py-2" [style.background]="'rgba(' + hexToRgb(plan.accent || '#00F0FF') + ', 0.15)'" [style.color]="plan.accent" style="border: 1px solid rgba(0,240,255,0.18);">
                                    {{ plan.risk_level }}
                                </span>
                            </div>

                            <div class="my-4 text-center p-4" [style.background]="'linear-gradient(135deg, rgba(' + hexToRgb(plan.accent || '#00F0FF') + ', 0.05), rgba(' + hexToRgb(plan.accent || '#00F0FF') + ', 0.15))'" style="border-radius: 12px;">
                                <p class="small mb-2 text-uppercase" style="letter-spacing: 1px; color: #A1A9C9;">Inversión mínima</p>
                                <h2 class="fw-bold mb-2" [style.color]="plan.accent">$ {{ plan.min_amount | number }}</h2>
                                <div class="d-flex justify-content-center gap-3 small" style="color: #CDD2E5;">
                                    <span><i class="bi bi-graph-up me-1"></i>{{ plan.roi_display }}</span>
                                    <span><i class="bi bi-calendar me-1"></i>{{ plan.duration_days }} días</span>
                                </div>
                            </div>

                            <ul class="list-unstyled mb-4">
                                <li class="mb-3 d-flex align-items-start" *ngFor="let feature of plan.features; let idxf = index">
                                    <i class="bi bi-check-circle-fill me-2 mt-1" [style.color]="plan.accent"></i>
                                    <span style="color: #CDD2E5;">{{ feature }}</span>
                                </li>
                            </ul>

                            <button class="btn w-100 btn-plan" [style.background]="plan.recommended ? 'linear-gradient(135deg, ' + plan.accent + ', ' + plan.accent + 'dd)' : 'transparent'" [style.border]="'2px solid ' + plan.accent" [style.color]="plan.recommended ? 'white' : plan.accent"
                                [routerLink]="['/payment']">
                                <i class="bi bi-arrow-right-circle me-2"></i>Invertir ahora
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inversiones Activas - Cabecera Mejorada -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="gpu-accelerated" style="background: linear-gradient(135deg, rgba(0,240,255,0.08), rgba(12,235,221,0.05)); border: 1px solid rgba(0,240,255,0.2); border-radius: 16px; padding: 20px; backdrop-filter: blur(10px);">
                        <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center gap-3">
                            <div>
                                <h4 style="color: white; font-weight: 800; font-size: clamp(1.3rem, 4vw, 1.7rem); margin: 0 0 8px 0; display: flex; align-items: center; gap: 12px;">
                                    <span style="width: 48px; height: 48px; background: linear-gradient(135deg, rgba(0,240,255,0.25), rgba(12,235,221,0.15)); border-radius: 12px; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(0,240,255,0.3);">
                                        <i class="bi bi-briefcase-fill" style="color: #00F0FF; font-size: 1.4rem;"></i>
                                    </span> Inversiones Activas
                                </h4>
                                <p style="color: #7581A8; margin: 0; font-size: 0.9rem;">
                                    <i class="bi bi-check-circle-fill me-2" style="color: #0CEBDD;"></i>Generando rendimientos diarios
                                </p>
                            </div>
                            <div class="d-flex align-items-center gap-3">
                                <span class="badge-animated" style="background: linear-gradient(135deg, rgba(0,240,255,0.25), rgba(12,235,221,0.2)); color: #00F0FF; padding: 12px 20px; font-size: 0.95rem; border-radius: 12px; border: 1px solid rgba(0,240,255,0.3); font-weight: 700;">
                                    <i class="bi bi-graph-up-arrow me-2"></i>{{(dashboardData()?.stats?.active_investments || 0)}} Activas
                                </span>
                                <button [routerLink]="['/market']" style="background: linear-gradient(135deg, #00F0FF, #4D7CFF); color: white; padding: 12px 20px; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 0.9rem; box-shadow: 0 4px 15px rgba(0,240,255,0.3); transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,240,255,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,240,255,0.3)'">
                                    <i class="bi bi-plus-circle"></i>
                                    <span class="d-none d-sm-inline">Nueva Inversión</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-3 g-md-4 mb-5">
                @if (dashboardData()?.active_investments && dashboardData()!.active_investments.length > 0) { @for (investment of dashboardData()!.active_investments; track investment.id) {
                <div class="col-12 col-md-6 col-xl-4 animate-fade-in-up">
                    <div class="investment-card gpu-accelerated" style="background: linear-gradient(145deg, rgba(13,17,46,0.95), rgba(9,12,33,0.9)); border: 1px solid rgba(0,240,255,0.3); border-radius: 18px; padding: 24px; position: relative; overflow: hidden; height: 100%; box-shadow: 0 8px 32px rgba(0,240,255,0.15);">
                        <!-- Barra de color superior -->
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #00F0FF, #4D7CFF, #0CEBDD);"></div>

                        <div class="d-flex justify-content-between align-items-start mb-4">
                            <div style="flex: 1;">
                                <span class="badge-animated mb-3" style="background: linear-gradient(135deg, #00F0FF, #4D7CFF); color: white; font-weight: 800; padding: 8px 16px; border-radius: 10px; font-size: 0.8rem; display: inline-block; box-shadow: 0 4px 12px rgba(0,240,255,0.3);">
                                    <i class="bi bi-star-fill me-1"></i>{{investment.investment_plan?.name || 'Plan de Inversión'}}
                                </span>
                                <h3 class="counter-number" style="color: white; font-weight: 900; margin: 12px 0; font-size: clamp(1.6rem, 4vw, 2rem); text-shadow: 0 2px 8px rgba(0,240,255,0.3);">
                                    ${{ investment.amount | number:'1.2-2' }}
                                </h3>
                                <p style="color: #A1A9C9; margin: 0; font-size: clamp(0.85rem, 2vw, 0.95rem); line-height: 1.5;">
                                    {{investment.investment_plan?.description || 'Inversión activa generando rendimientos'}}
                                </p>
                            </div>
                            <span class="badge-glow" style="background: linear-gradient(135deg, rgba(12,235,221,0.25), rgba(0,240,255,0.2)); color: #0CEBDD; padding: 8px 14px; border-radius: 12px; font-size: 0.8rem; border: 1px solid rgba(12,235,221,0.3); font-weight: 700;">
                                <i class="bi bi-check-circle-fill me-1"></i>{{investment.status || 'active'}}
                            </span>
                        </div>

                        <div class="row text-center mb-4 py-3" style="background: rgba(0,240,255,0.05); border-radius: 12px; border: 1px solid rgba(0,240,255,0.1);">
                            <div class="col-4">
                                <div style="padding: 8px;">
                                    <i class="bi bi-percent" style="color: #00F0FF; font-size: 1.2rem; display: block; margin-bottom: 6px;"></i>
                                    <p style="color: #7581A8; margin: 0 0 6px 0; font-size: 0.75rem; font-weight: 600;">Diario</p>
                                    <p class="counter-number" style="color: #00F0FF; font-weight: 800; margin: 0; font-size: clamp(1rem, 2.5vw, 1.2rem);">
                                        {{investment.investment_plan?.daily_return_rate || 0}}%
                                    </p>
                                </div>
                            </div>
                            <div class="col-4" style="border-left: 1px solid rgba(0,240,255,0.1); border-right: 1px solid rgba(0,240,255,0.1);">
                                <div style="padding: 8px;">
                                    <i class="bi bi-calendar-range" style="color: #4D7CFF; font-size: 1.2rem; display: block; margin-bottom: 6px;"></i>
                                    <p style="color: #7581A8; margin: 0 0 6px 0; font-size: 0.75rem; font-weight: 600;">Progreso</p>
                                    <p class="counter-number" style="color: white; font-weight: 800; margin: 0; font-size: clamp(1rem, 2.5vw, 1.2rem);">
                                        {{investment.completed_days || 0}}/{{investment.investment_plan?.duration_days || 0}} min (Sim)
                                    </p>
                                </div>
                            </div>
                            <div class="col-4">
                                <div style="padding: 8px;">
                                    <i class="bi bi-cash-coin" style="color: #0CEBDD; font-size: 1.2rem; display: block; margin-bottom: 6px;"></i>
                                    <p style="color: #7581A8; margin: 0 0 6px 0; font-size: 0.75rem; font-weight: 600;">Ganado</p>
                                    <p class="counter-number" style="color: #0CEBDD; font-weight: 800; margin: 0; font-size: clamp(1rem, 2.5vw, 1.2rem);">
                                        ${{ (investment.total_earned || 0) | number:'1.2-2' }}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span style="color: #7581A8; font-size: 0.8rem; font-weight: 600;">Completado</span>
                                <span style="color: #00F0FF; font-weight: 800; font-size: 0.9rem;">
                                    {{((investment.completed_days || 0) / (investment.investment_plan?.duration_days || 1) * 100) | number:'1.0-1'}}%
                                </span>
                            </div>
                            <div class="progress progress-glow" style="height: 12px; background: rgba(0,240,255,0.1); border-radius: 10px; overflow: hidden; border: 1px solid rgba(0,240,255,0.15);">
                                <div class="progress-bar progress-bar-animated" style="background: linear-gradient(90deg, #00F0FF, #4D7CFF); box-shadow: 0 0 15px rgba(0,240,255,0.5);" [style.width]="((investment.completed_days || 0) / (investment.investment_plan?.duration_days || 1) * 100) + '%'"></div>
                            </div>
                        </div>
                    </div>
                </div>
                } } @else {
                <div class="col-12">
                    <div class="gpu-accelerated" style="background: linear-gradient(145deg, rgba(9,15,45,0.8), rgba(6,10,28,0.75)); border: 2px dashed rgba(0,240,255,0.25); border-radius: 20px; padding: clamp(40px, 6vw, 70px); text-align: center; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200px; height: 200px; background: radial-gradient(circle, rgba(0,240,255,0.05), transparent); border-radius: 50%;"></div>
                        <div style="position: relative; z-index: 1;">
                            <div style="width: 120px; height: 120px; margin: 0 auto 24px; background: linear-gradient(135deg, rgba(0,240,255,0.15), rgba(12,235,221,0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px dashed rgba(0,240,255,0.3);">
                                <i class="bi bi-graph-up" style="font-size: 3.5rem; color: #00F0FF; opacity: 0.8;"></i>
                            </div>
                            <h5 style="color: white; margin: 0 0 12px 0; font-size: clamp(1.2rem, 3vw, 1.5rem); font-weight: 800;">No tienes inversiones activas</h5>
                            <p style="color: #A1A9C9; margin: 0 0 28px 0; font-size: clamp(0.95rem, 2vw, 1.05rem); max-width: 500px; margin-left: auto; margin-right: auto;">Comienza a invertir en nuestros planes para generar rendimientos diarios automáticos</p>
                            <button [routerLink]="['/market']" style="background: linear-gradient(135deg, #00F0FF, #4D7CFF); color: white; font-weight: 700; padding: 16px 36px; border: none; border-radius: 14px; font-size: clamp(0.95rem, 2vw, 1.05rem); box-shadow: 0 8px 24px rgba(0,240,255,0.3); transition: all 0.3s ease; cursor: pointer;"
                                onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 32px rgba(0,240,255,0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(0,240,255,0.3)'">
                                <i class="bi bi-plus-circle me-2"></i>Explorar Planes de Inversión
                            </button>
                        </div>
                    </div>
                </div>
                }
            </div>

            <!-- Sección eliminada: Transacciones Recientes se recreará con nuevo diseño -->
        </div>
    </div>
</div>

<style>
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 240, 255, 0.2);
        border-color: rgba(0, 240, 255, 0.5) !important;
    }
    
    .investment-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 240, 255, 0.2);
        border-color: rgba(0, 240, 255, 0.5) !important;
    }
    
    .nav-link:hover {
        background: rgba(0, 240, 255, 0.1) !important;
        color: #00F0FF !important;
    }
    
    .nav-link.active {
        background: rgba(0, 240, 255, 0.2) !important;
        color: #00F0FF !important;
    }
    
    .table tbody tr:hover {
        background: rgba(0, 240, 255, 0.05) !important;
    }
    
    @media (max-width: 768px) {
        .navbar-collapse {
            background: rgba(13, 17, 46, 0.95);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 1px solid rgba(0, 240, 255, 0.2);
        }
    }
</style>